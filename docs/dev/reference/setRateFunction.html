<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Set own rate function to replace mizer rate function — setRateFunction • mizer</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="Set own rate function to replace mizer rate function — setRateFunction" />
<meta property="og:description" content="If the way mizer calculates a fundamental rate entering the model is
not flexible enough for you (for example if you need to introduce time
dependence) then you can write your own functions for calculating that
rate and use setRateFunction() to register it with mizer." />
<meta property="og:image" content="https://sizespectrum.org/mizer/logo.png" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mizer</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">2.2.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/mizer.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="divider"></li>
    <li class="dropdown-header">Tutorials</li>
    <li>
      <a href="../articles/single_species_size-spectrum_dynamics.html">Single-species size-spectrum dynamics</a>
    </li>
    <li>
      <a href="../articles/model_description.html">The General Mizer Size-spectrum Model</a>
    </li>
    <li>
      <a href="../articles/community_model.html">The Community Model</a>
    </li>
    <li>
      <a href="../articles/trait_model.html">The Trait-Based Model</a>
    </li>
    <li>
      <a href="../articles/multispecies_model.html">The Multi Species Model</a>
    </li>
    <li>
      <a href="../articles/running_a_simulation.html">Running a Simulation</a>
    </li>
    <li>
      <a href="../articles/exploring_the_simulation_results.html">Exploring the Simulation Results</a>
    </li>
    <li>
      <a href="../articles/a_multispecies_model_of_the_north_sea.html">A Multi-Species Model of the North Sea</a>
    </li>
    <li>
      <a href="../articles/plotting.html">Using ggplot2 and plotly with mizer</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Publications</li>
    <li>
      <a href="../articles/publications.html">Publications</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">For developers</li>
    <li>
      <a href="../articles/developer_vignette.html">Developer Guide</a>
    </li>
    <li>
      <a href="../articles/working_with_git.html">Working with git and GitHub</a>
    </li>
    <li>
      <a href="../articles/developer_FAQ.html">Developer FAQ</a>
    </li>
    <li>
      <a href="../articles/editing_website.html">Editing the Mizer Website</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://blog.mizer.sizespectrum.org">Blog</a>
</li>
<li>
  <a href="https://twitter.com/mizer_model">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/sizespectrum/mizer/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Set own rate function to replace mizer rate function</h1>
    <small class="dont-index">Source: <a href='https://github.com/sizespectrum/mizer/blob/master/R/extension.R'><code>R/extension.R</code></a></small>
    <div class="hidden name"><code>setRateFunction.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>If the way mizer calculates a fundamental rate entering the model is
not flexible enough for you (for example if you need to introduce time
dependence) then you can write your own functions for calculating that
rate and use <code>setRateFunction()</code> to register it with mizer.</p>
    </div>

    <pre class="usage"><span class='fu'>setRateFunction</span><span class='op'>(</span><span class='va'>params</span>, <span class='va'>rate</span>, <span class='va'>fun</span><span class='op'>)</span>

<span class='fu'>getRateFunction</span><span class='op'>(</span><span class='va'>params</span>, <span class='va'>rate</span><span class='op'>)</span>

<span class='fu'>other_params</span><span class='op'>(</span><span class='va'>params</span><span class='op'>)</span>

<span class='fu'>other_params</span><span class='op'>(</span><span class='va'>params</span><span class='op'>)</span> <span class='op'>&lt;-</span> <span class='va'>value</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>params</th>
      <td><p>A MizerParams object</p></td>
    </tr>
    <tr>
      <th>rate</th>
      <td><p>Name of the rate for which a new function is to be set.</p></td>
    </tr>
    <tr>
      <th>fun</th>
      <td><p>Name of the function to use to calculate the rate.</p></td>
    </tr>
    <tr>
      <th>value</th>
      <td><p>Values for other parameters</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For <code>setRateFunction()</code>: An updated MizerParams object</p>
<p>For <code>getRateFunction()</code>: The name of the registered rate function for
the requested <code>rate</code>, or the list of all rate functions if called without
<code>rate</code> argument.</p>
<p>For <code>other_params()</code>: A named list with all the parameters for which
you have set values.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>At each time step during a simulation with the <code><a href='project.html'>project()</a></code> function, mizer
needs to calculate the instantaneous values of the various rates. By
default it calls the <code><a href='mizerRates.html'>mizerRates()</a></code> function which creates a list with the
following components:</p><ul>
<li><p><code>encounter</code> from <code><a href='mizerEncounter.html'>mizerEncounter()</a></code></p></li>
<li><p><code>feeding_level</code> from <code><a href='mizerFeedingLevel.html'>mizerFeedingLevel()</a></code></p></li>
<li><p><code>pred_rate</code> from <code><a href='mizerPredRate.html'>mizerPredRate()</a></code></p></li>
<li><p><code>pred_mort</code> from <code><a href='mizerPredMort.html'>mizerPredMort()</a></code></p></li>
<li><p><code>f_mort</code> from <code><a href='mizerFMort.html'>mizerFMort()</a></code></p></li>
<li><p><code>mort</code> from <code><a href='mizerMort.html'>mizerMort()</a></code></p></li>
<li><p><code>resource_mort</code> from <code><a href='mizerResourceMort.html'>mizerResourceMort()</a></code></p></li>
<li><p><code>e</code> from <code><a href='mizerEReproAndGrowth.html'>mizerEReproAndGrowth()</a></code></p></li>
<li><p><code>e_repro</code> from <code><a href='mizerERepro.html'>mizerERepro()</a></code></p></li>
<li><p><code>e_growth</code> from <code><a href='mizerEGrowth.html'>mizerEGrowth()</a></code></p></li>
<li><p><code>rdi</code> from <code><a href='mizerRDI.html'>mizerRDI()</a></code></p></li>
<li><p><code>rdd</code> from <code><a href='BevertonHoltRDD.html'>BevertonHoltRDD()</a></code></p></li>
</ul>

<p>For each of these you can substitute your own function. So for example if
you have written your own function for calculating the total mortality
rate and have called it <code>myMort</code> and have a mizer model stored in a
MizerParams object called <code>params</code> that you want to run with your new
mortality rate, then you would call</p><pre><span class='va'>params</span> <span class='op'>&lt;-</span> <span class='fu'>setRateFunction</span><span class='op'>(</span><span class='va'>params</span>, <span class='st'>"Mort"</span>, <span class='st'>"myMort"</span><span class='op'>)</span>
</pre>

<p>In general if you want to replace a function <code>mizerSomeRateFunc()</code> with
a function <code>myVersionOfThis()</code> you would call</p><pre><span class='va'>params</span> <span class='op'>&lt;-</span> <span class='fu'>setRateFunction</span><span class='op'>(</span><span class='va'>params</span>, <span class='st'>"SomeRateFunc"</span>, <span class='st'>"myVersionOfThis"</span><span class='op'>)</span>
</pre>

<p>In some extreme cases you may need to swap out the entire <code><a href='mizerRates.html'>mizerRates()</a></code>
function for your own function called <code>myRates()</code>. That you can do with</p><pre><span class='va'>params</span> <span class='op'>&lt;-</span> <span class='fu'>setRateFunction</span><span class='op'>(</span><span class='va'>params</span>, <span class='st'>"Rates"</span>, <span class='st'>"myRates"</span><span class='op'>)</span>
</pre>

<p>Your new rate functions may need their own model parameters. These you
can store in <code>other_params(params)</code>. For example</p><pre><span class='fu'>other_params</span><span class='op'>(</span><span class='va'>params</span><span class='op'>)</span><span class='op'>$</span><span class='va'>my_param</span> <span class='op'>&lt;-</span> <span class='fl'>42</span>
</pre>

<p>Note that your own rate functions need to be defined in the global
environment or in a package. If they are defined within a function then
mizer will not find them.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.york.ac.uk/maths/staff/gustav-delius/'>Gustav Delius</a>, Finlay Scott, <a href='http://www.utas.edu.au/profiles/staff/imas/julia-blanchard'>Julia Blanchard</a>, <a href='https://ken.haste.dk/'>Ken Andersen</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '96e9641255d3fff35a4fd16d1a1bf70c',
    indexName: 'sizespectrum_mizer',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


