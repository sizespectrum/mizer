<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="If the way mizer calculates a fundamental rate entering the model is
not flexible enough for you (for example if you need to introduce time
dependence) then you can write your own functions for calculating that
rate and use setRateFunction() to register it with mizer."><title>Set own rate function to replace mizer rate function — setRateFunction • mizer</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Set own rate function to replace mizer rate function — setRateFunction"><meta property="og:description" content="If the way mizer calculates a fundamental rate entering the model is
not flexible enough for you (for example if you need to introduce time
dependence) then you can write your own functions for calculating that
rate and use setRateFunction() to register it with mizer."><meta property="og:image" content="https://sizespectrum.org/mizer/reference/figures/logo.png"><meta property="og:image:alt" content="mizer: Multi-Species Size Spectrum Modelling in R"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@mizer_model"><meta name="twitter:site" content="@mizer_model"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mizer</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.3.1.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/mizer.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/model_description.html">The General Mizer Size-spectrum Model</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Tutorials</h6>
    <a class="dropdown-item" href="../articles/single_species_size-spectrum_dynamics.html">Single-species size-spectrum dynamics</a>
    <a class="dropdown-item" href="../articles/community_model.html">The Community Model</a>
    <a class="dropdown-item" href="../articles/trait_model.html">The Trait-Based Model</a>
    <a class="dropdown-item" href="../articles/multispecies_model.html">The Multi Species Model</a>
    <a class="dropdown-item" href="../articles/running_a_simulation.html">Running a Simulation</a>
    <a class="dropdown-item" href="../articles/exploring_the_simulation_results.html">Exploring the Simulation Results</a>
    <a class="dropdown-item" href="../articles/a_multispecies_model_of_the_north_sea.html">A Multi-Species Model of the North Sea</a>
    <a class="dropdown-item" href="../articles/plotting.html">Using ggplot2 and plotly with mizer</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Publications</h6>
    <a class="dropdown-item" href="../articles/publications.html">Publications</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>For developers</h6>
    <a class="dropdown-item" href="../articles/developer_vignette.html">Developer Guide</a>
    <a class="dropdown-item" href="../articles/working_with_git.html">Working with git and GitHub</a>
    <a class="dropdown-item" href="../articles/developer_FAQ.html">Developer FAQ</a>
    <a class="dropdown-item" href="../articles/editing_website.html">Editing the Mizer Website</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://blog.mizer.sizespectrum.org">Blog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/mizer_model" aria-label="Twitter">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sizespectrum/mizer/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Set own rate function to replace mizer rate function</h1>
      <small class="dont-index">Source: <a href="https://github.com/sizespectrum/mizer/blob/HEAD/R/extension.R" class="external-link"><code>R/extension.R</code></a></small>
      <div class="d-none name"><code>setRateFunction.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>If the way mizer calculates a fundamental rate entering the model is
not flexible enough for you (for example if you need to introduce time
dependence) then you can write your own functions for calculating that
rate and use <code>setRateFunction()</code> to register it with mizer.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">setRateFunction</span><span class="op">(</span><span class="va">params</span>, <span class="va">rate</span>, <span class="va">fun</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">getRateFunction</span><span class="op">(</span><span class="va">params</span>, <span class="va">rate</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">other_params</span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">other_params</span><span class="op">(</span><span class="va">params</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>params</dt>
<dd><p>A MizerParams object</p></dd>


<dt>rate</dt>
<dd><p>Name of the rate for which a new function is to be set.</p></dd>


<dt>fun</dt>
<dd><p>Name of the function to use to calculate the rate.</p></dd>


<dt>value</dt>
<dd><p>Values for other parameters</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>For <code>setRateFunction()</code>: An updated MizerParams object</p>


<p>For <code>getRateFunction()</code>: The name of the registered rate function for
the requested <code>rate</code>, or the list of all rate functions if called without
<code>rate</code> argument.</p>


<p>For <code>other_params()</code>: A named list with all the parameters for which
you have set values.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>At each time step during a simulation with the <code><a href="project.html">project()</a></code> function, mizer
needs to calculate the instantaneous values of the various rates. By
default it calls the <code><a href="mizerRates.html">mizerRates()</a></code> function which creates a list with the
following components:</p><ul><li><p><code>encounter</code> from <code><a href="mizerEncounter.html">mizerEncounter()</a></code></p></li>
<li><p><code>feeding_level</code> from <code><a href="mizerFeedingLevel.html">mizerFeedingLevel()</a></code></p></li>
<li><p><code>pred_rate</code> from <code><a href="mizerPredRate.html">mizerPredRate()</a></code></p></li>
<li><p><code>pred_mort</code> from <code><a href="mizerPredMort.html">mizerPredMort()</a></code></p></li>
<li><p><code>f_mort</code> from <code><a href="mizerFMort.html">mizerFMort()</a></code></p></li>
<li><p><code>mort</code> from <code><a href="mizerMort.html">mizerMort()</a></code></p></li>
<li><p><code>resource_mort</code> from <code><a href="mizerResourceMort.html">mizerResourceMort()</a></code></p></li>
<li><p><code>e</code> from <code><a href="mizerEReproAndGrowth.html">mizerEReproAndGrowth()</a></code></p></li>
<li><p><code>e_repro</code> from <code><a href="mizerERepro.html">mizerERepro()</a></code></p></li>
<li><p><code>e_growth</code> from <code><a href="mizerEGrowth.html">mizerEGrowth()</a></code></p></li>
<li><p><code>rdi</code> from <code><a href="mizerRDI.html">mizerRDI()</a></code></p></li>
<li><p><code>rdd</code> from <code><a href="BevertonHoltRDD.html">BevertonHoltRDD()</a></code></p></li>
</ul><p>For each of these you can substitute your own function. So for example if
you have written your own function for calculating the total mortality
rate and have called it <code>myMort</code> and have a mizer model stored in a
MizerParams object called <code>params</code> that you want to run with your new
mortality rate, then you would call</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>params <span class="ot">&lt;-</span> <span class="fu">setRateFunction</span>(params, <span class="st">"Mort"</span>, <span class="st">"myMort"</span>)</span></code></pre><p></p></div>
<p>In general if you want to replace a function <code>mizerSomeRateFunc()</code> with
a function <code>myVersionOfThis()</code> you would call</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>params <span class="ot">&lt;-</span> <span class="fu">setRateFunction</span>(params, <span class="st">"SomeRateFunc"</span>, <span class="st">"myVersionOfThis"</span>)</span></code></pre><p></p></div>
<p>In some extreme cases you may need to swap out the entire <code><a href="mizerRates.html">mizerRates()</a></code>
function for your own function called <code>myRates()</code>. That you can do with</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>params <span class="ot">&lt;-</span> <span class="fu">setRateFunction</span>(params, <span class="st">"Rates"</span>, <span class="st">"myRates"</span>)</span></code></pre><p></p></div>
<p>Your new rate functions may need their own model parameters. These you
can store in <code>other_params(params)</code>. For example</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">other_params</span>(params)<span class="sc">$</span>my_param <span class="ot">&lt;-</span> <span class="dv">42</span></span></code></pre><p></p></div>
<p>Note that your own rate functions need to be defined in the global
environment or in a package. If they are defined within a function then
mizer will not find them.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://www.york.ac.uk/maths/staff/gustav-delius/" class="external-link">Gustav Delius</a>, Finlay Scott, <a href="http://www.utas.edu.au/profiles/staff/imas/julia-blanchard" class="external-link">Julia Blanchard</a>, <a href="https://ken.haste.dk/" class="external-link">Ken Andersen</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

