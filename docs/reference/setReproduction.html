<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Sets the proportion of the total energy available for reproduction and growth
that is invested into reproduction as a function of the size of the
individual and sets additional density dependence."><title>Set reproduction parameters — setReproduction • mizer</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Set reproduction parameters — setReproduction"><meta property="og:description" content="Sets the proportion of the total energy available for reproduction and growth
that is invested into reproduction as a function of the size of the
individual and sets additional density dependence."><meta property="og:image" content="https://sizespectrum.org/mizer/reference/figures/logo.png"><meta property="og:image:alt" content="mizer: Multi-Species Size Spectrum Modelling in R"><meta name="twitter:card" content="summary"><meta name="twitter:creator" content="@mizer_model"><meta name="twitter:site" content="@mizer_model"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mizer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.4.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/mizer.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/model_description.html">The General Mizer Size-spectrum Model</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Tutorials</h6>
    <a class="dropdown-item" href="../articles/single_species_size-spectrum_dynamics.html">Single-species size-spectrum dynamics</a>
    <a class="dropdown-item" href="../articles/community_model.html">The Community Model</a>
    <a class="dropdown-item" href="../articles/trait_model.html">The Trait-Based Model</a>
    <a class="dropdown-item" href="../articles/multispecies_model.html">The Multi Species Model</a>
    <a class="dropdown-item" href="../articles/running_a_simulation.html">Running a Simulation</a>
    <a class="dropdown-item" href="../articles/exploring_the_simulation_results.html">Exploring the Simulation Results</a>
    <a class="dropdown-item" href="../articles/a_multispecies_model_of_the_north_sea.html">A Multi-Species Model of the North Sea</a>
    <a class="dropdown-item" href="../articles/plotting.html">Using ggplot2 and plotly with mizer</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Publications</h6>
    <a class="dropdown-item" href="../articles/publications.html">Publications</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>For developers</h6>
    <a class="dropdown-item" href="../articles/developer_vignette.html">Developer Guide</a>
    <a class="dropdown-item" href="../articles/working_with_git.html">Working with git and GitHub</a>
    <a class="dropdown-item" href="../articles/developer_FAQ.html">Developer FAQ</a>
    <a class="dropdown-item" href="../articles/editing_website.html">Editing the Mizer Website</a>
  </div>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://blog.mizer.sizespectrum.org">Blog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/mizer_model" aria-label="Twitter">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sizespectrum/mizer/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Set reproduction parameters</h1>
      <small class="dont-index">Source: <a href="https://github.com/sizespectrum/mizer/blob/HEAD/R/setReproduction.R" class="external-link"><code>R/setReproduction.R</code></a></small>
      <div class="d-none name"><code>setReproduction.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Sets the proportion of the total energy available for reproduction and growth
that is invested into reproduction as a function of the size of the
individual and sets additional density dependence.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">setReproduction</span><span class="op">(</span></span>
<span>  <span class="va">params</span>,</span>
<span>  maturity <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  repro_prop <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  reset <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  RDD <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">getMaturityProportion</span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">maturity</span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">maturity</span><span class="op">(</span><span class="va">params</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span>
<span></span>
<span><span class="fu">getReproductionProportion</span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">repro_prop</span><span class="op">(</span><span class="va">params</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">repro_prop</span><span class="op">(</span><span class="va">params</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">value</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>params</dt>
<dd><p>A MizerParams object</p></dd>


<dt>maturity</dt>
<dd><p>Optional. An array (species x size) that holds the proportion
of individuals of each species at size that are mature. If not supplied, a
default is set as described in the section "Setting reproduction".</p></dd>


<dt>repro_prop</dt>
<dd><p>Optional. An array (species x size) that holds the
proportion of consumed energy that a mature individual allocates to
reproduction for each species at size. If not supplied, a default is set as
described in the section "Setting reproduction".</p></dd>


<dt>reset</dt>
<dd><p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a>
If set to TRUE, then both <code>maturity</code> and <code>repro_prop</code> will be
reset to the value calculated from the species parameters, even if they
were previously overwritten with custom values. If set to FALSE (default)
then a recalculation from the species parameters will take place only if no
custom values have been set.</p></dd>


<dt>RDD</dt>
<dd><p>The name of the function calculating the density-dependent
reproduction rate from the density-independent rate. Defaults to
"<code><a href="BevertonHoltRDD.html">BevertonHoltRDD()</a></code>".</p></dd>


<dt>...</dt>
<dd><p>Unused</p></dd>


<dt>value</dt>
<dd><p>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>setReproduction()</code>: A MizerParams object with updated reproduction
parameters.</p>


<p><code>getMaturityProportion()</code> or equivalently `maturity():
An array (species x size) that holds the proportion
of individuals of each species at size that are mature.</p>


<p><code>getReproductionProportion()</code> or equivalently <code>repro_prop()</code>:
An array (species x size) that holds the
proportion of consumed energy that a mature individual allocates to
reproduction for each species at size. For sizes where the maturity
proportion is zero, also the reproduction proportion is returned as zero.</p>
    </div>
    <div class="section level2">
    <h2 id="setting-reproduction">Setting reproduction<a class="anchor" aria-label="anchor" href="#setting-reproduction"></a></h2>
    


<p>For each species and at each size, the proportion \(\psi\) of the
available energy
that is invested into reproduction is the product of two factors: the
proportion <code>maturity</code> of individuals that are mature and the proportion
<code>repro_prop</code> of the energy available to a mature individual that is
invested into reproduction.</p>
<div class="section">
<h3 id="maturity-ogive">Maturity ogive<a class="anchor" aria-label="anchor" href="#maturity-ogive"></a></h3>
<p>If the the proportion of individuals that are mature is not supplied via
the <code>maturity</code> argument , then it is set to a sigmoidal
maturity ogive that changes from 0 to 1 at around the maturity size:
$${\tt maturity}(w) = \left[1+\left(\frac{w}{w_{mat}}\right)^{-U}\right]^{-1}.$$
(To avoid clutter, we are not showing the species index in the equations,
although each species has its own maturity ogive.)
The maturity weights are taken from the <code>w_mat</code> column of the
species_params data frame. Any missing maturity weights are set to 1/4 of the
maximum weight in the <code>w_max</code> column.</p>
<p>The exponent \(U\) determines the steepness of the maturity ogive. By
default it is chosen as \(U = 10\), however this can be overridden by
including a column <code>w_mat25</code> in the species parameter dataframe that
specifies the weight at which 25% of individuals are mature, which sets
\(U = \log(3) / \log(w_{mat} / w_{25}).\)</p>
<p>The sigmoidal function given above would strictly reach 1 only asymptotically.
Mizer instead sets the function equal to 1 already at the species'
maximum size, taken from the compulsory <code>w_max</code> column in the
species parameter data frame. Also, for computational simplicity, any
proportion smaller than <code>1e-8</code> is set to <code>0</code>.</p>
</div>

<div class="section">
<h3 id="investment-into-reproduction">Investment into reproduction<a class="anchor" aria-label="anchor" href="#investment-into-reproduction"></a></h3>
<p>If the the energy available to a mature individual that is
invested into reproduction is not supplied via the <code>repro_prop</code> argument,
it is set to the allometric form
$${\tt repro\_prop}(w) = \left(\frac{w}{w_{max}}\right)^{m-n}.$$
Here \(n\) is the scaling exponent of the energy income rate. Hence
the exponent \(m\) determines the scaling of the investment into
reproduction for mature individuals. By default it is chosen to be
\(m = 1\) so that the rate at which energy is invested into reproduction
scales linearly with the size. This default can be overridden by including a
column <code>m</code> in the species parameter dataframe. The maximum sizes
are taken from the compulsory <code>w_max</code> column in the species parameter
data frame.</p>
<p>The total proportion of energy invested into reproduction of an individual
of size \(w\) is then
$$\psi(w) = {\tt maturity}(w){\tt repro\_prop}(w)$$</p>
</div>

<div class="section">
<h3 id="reproductive-efficiency">Reproductive efficiency<a class="anchor" aria-label="anchor" href="#reproductive-efficiency"></a></h3>
<p>The reproductive efficiency \(\epsilon\), i.e., the proportion of energy allocated to
reproduction that results in egg biomass, is set through the <code>erepro</code>
column in the species_params data frame. If that is not provided, the default
is set to 1 (which you will want to override). The offspring biomass divided
by the egg biomass gives the rate of egg production, returned by
<code><a href="getRDI.html">getRDI()</a></code>:
$$R_{di} = \frac{\epsilon}{2 w_{min}} \int N(w)  E_r(w) \psi(w) \, dw$$</p>
</div>

<div class="section">
<h3 id="density-dependence">Density dependence<a class="anchor" aria-label="anchor" href="#density-dependence"></a></h3>
<p>The stock-recruitment relationship is an emergent phenomenon in mizer, with
several sources of density dependence. Firstly, the amount of energy invested
into reproduction depends on the energy income of the spawners, which is
density-dependent due to competition for prey. Secondly, the proportion of
larvae that grow up to recruitment size depends on the larval mortality,
which depends on the density of predators, and on larval growth rate, which
depends on density of prey.</p>
<p>Finally, to encode all the density dependence in the stock-recruitment
relationship that is not already included in the other two sources of density
dependence, mizer puts the the density-independent rate of egg production
through a density-dependence function. The result is returned by
<code><a href="getRDD.html">getRDD()</a></code>. The name of the density-dependence function is
specified by the <code>RDD</code> argument. The default is the Beverton-Holt
function <code><a href="BevertonHoltRDD.html">BevertonHoltRDD()</a></code>, which requires an <code>R_max</code> column
in the species_params data frame giving the maximum egg production rate. If
this column does not exist, it is initialised to <code>Inf</code>, leading to no
density-dependence. Other functions provided by mizer are
<code><a href="RickerRDD.html">RickerRDD()</a></code> and <code><a href="SheperdRDD.html">SheperdRDD()</a></code> and you can easily use
these as models for writing your own functions.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other functions for setting parameters: 
<code><a href="gear_params.html">gear_params</a>()</code>,
<code><a href="setExtMort.html">setExtMort</a>()</code>,
<code><a href="setFishing.html">setFishing</a>()</code>,
<code><a href="setInitialValues.html">setInitialValues</a>()</code>,
<code><a href="setInteraction.html">setInteraction</a>()</code>,
<code><a href="setMaxIntakeRate.html">setMaxIntakeRate</a>()</code>,
<code><a href="setMetabolicRate.html">setMetabolicRate</a>()</code>,
<code><a href="setParams.html">setParams</a>()</code>,
<code><a href="setPredKernel.html">setPredKernel</a>()</code>,
<code><a href="setSearchVolume.html">setSearchVolume</a>()</code>,
<code><a href="species_params.html">species_params</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Plot maturity and reproduction ogives for Cod in North Sea model</span></span></span>
<span class="r-in"><span><span class="va">maturity</span> <span class="op">&lt;-</span> <span class="fu">getMaturityProportion</span><span class="op">(</span><span class="va">NS_params</span><span class="op">)</span><span class="op">[</span><span class="st">"Cod"</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">repro_prop</span> <span class="op">&lt;-</span> <span class="fu">getReproductionProportion</span><span class="op">(</span><span class="va">NS_params</span><span class="op">)</span><span class="op">[</span><span class="st">"Cod"</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Size <span class="op">=</span> <span class="fu"><a href="w.html">w</a></span><span class="op">(</span><span class="va">NS_params</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                 Reproduction <span class="op">=</span> <span class="va">repro_prop</span>, </span></span>
<span class="r-in"><span>                 Maturity <span class="op">=</span> <span class="va">maturity</span>, </span></span>
<span class="r-in"><span>                 Total <span class="op">=</span> <span class="va">maturity</span> <span class="op">*</span> <span class="va">repro_prop</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dff</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/reshape2/man/melt.html" class="external-link">melt</a></span><span class="op">(</span><span class="va">df</span>, id.vars <span class="op">=</span> <span class="st">"Size"</span>, </span></span>
<span class="r-in"><span>            variable.name <span class="op">=</span> <span class="st">"Type"</span>, </span></span>
<span class="r-in"><span>            value.name <span class="op">=</span> <span class="st">"Proportion"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dff</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Size</span>, y <span class="op">=</span> <span class="va">Proportion</span>, colour <span class="op">=</span> <span class="va">Type</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="setReproduction-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://www.york.ac.uk/maths/staff/gustav-delius/" class="external-link">Gustav Delius</a>, Finlay Scott, <a href="http://www.utas.edu.au/profiles/staff/imas/julia-blanchard" class="external-link">Julia Blanchard</a>, <a href="https://ken.haste.dk/" class="external-link">Ken Andersen</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

