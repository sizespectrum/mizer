<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mizer">
<title>Exploring the Simulation Results • mizer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Exploring the Simulation Results">
<meta property="og:description" content="mizer">
<meta property="og:image" content="https://sizespectrum.org/mizer/reference/figures/logo.png">
<meta property="og:image:alt" content="mizer: Multi-Species Size Spectrum Modelling in R">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@mizer_model">
<meta name="twitter:site" content="@mizer_model">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mizer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/mizer.html">Get started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/model_description.html">The General Mizer Size-spectrum Model</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Tutorials</h6>
    <a class="dropdown-item" href="../articles/single_species_size-spectrum_dynamics.html">Single-species size-spectrum dynamics</a>
    <a class="dropdown-item" href="../articles/community_model.html">The Community Model</a>
    <a class="dropdown-item" href="../articles/trait_model.html">The Trait-Based Model</a>
    <a class="dropdown-item" href="../articles/multispecies_model.html">The Multi Species Model</a>
    <a class="dropdown-item" href="../articles/running_a_simulation.html">Running a Simulation</a>
    <a class="dropdown-item" href="../articles/exploring_the_simulation_results.html">Exploring the Simulation Results</a>
    <a class="dropdown-item" href="../articles/a_multispecies_model_of_the_north_sea.html">A Multi-Species Model of the North Sea</a>
    <a class="dropdown-item" href="../articles/plotting.html">Using ggplot2 and plotly with mizer</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Publications</h6>
    <a class="dropdown-item" href="../articles/publications.html">Publications</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>For developers</h6>
    <a class="dropdown-item" href="../articles/developer_vignette.html">Developer Guide</a>
    <a class="dropdown-item" href="../articles/working_with_git.html">Working with git and GitHub</a>
    <a class="dropdown-item" href="../articles/developer_FAQ.html">Developer FAQ</a>
    <a class="dropdown-item" href="../articles/editing_website.html">Editing the Mizer Website</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://blog.mizer.sizespectrum.org">Blog</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/mizer_model">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/sizespectrum/mizer/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Exploring the Simulation Results</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sizespectrum/mizer/blob/HEAD/vignettes/exploring_the_simulation_results.Rmd" class="external-link"><code>vignettes/exploring_the_simulation_results.Rmd</code></a></small>
      <div class="d-none name"><code>exploring_the_simulation_results.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="sec:exploring">Introduction<a class="anchor" aria-label="anchor" href="#sec:exploring"></a>
</h2>
<p>In the sections on <a href="multispecies_model.html">the multispecies
model</a> and on <a href="running_a_simulation.html">running a
simulation</a> we saw how to set up a model and project it forward
through time under our desired fishing scenario. The result of running a
projection is an object of class <code>MizerSim</code>. What do we then
do? How can we explore the results of the simulation? In this section we
introduce a range of summaries, plots and indicators that can be easily
produced using functions included in mizer.</p>
<p>We will use the following <code>MizerSim</code> object for these
examples, where the effort array is the one we created in the <a href="running_a_simulation.html">previous section on running a
simulation</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/project.html">project</a></span><span class="op">(</span><span class="va">NS_params</span>, effort <span class="op">=</span> <span class="va">effort_array</span>, dt <span class="op">=</span> <span class="fl">0.1</span>, t_save <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="accessing-the-simulation-results">Accessing the simulation results<a class="anchor" aria-label="anchor" href="#accessing-the-simulation-results"></a>
</h2>
<p>The projected species abundances at size through time can be obtained
with <code>N(sim)</code>. This returns a three-dimensional array (time x
species x size). Consequently, this array can get very big so inspecting
it can be difficult. In the example we have just run, the time dimension
of <code>n</code> has 10 rows (one for the initial population and then
one for each of the saved time steps). There are also 12 species each
with 100 sizes. We can check this by running the <code><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim()</a></code>
function and looking at the dimensions of the <code>n</code> array:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="fu"><a href="../reference/N.html">N</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1]  10  12 100</span></span></code></pre>
<p>To pull out the abundances of a particular species through time at
size you can subset the array. For example to look at Cod through time
you can use:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/N.html">N</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span><span class="op">[</span>, <span class="st">"Cod"</span>, <span class="op">]</span></span></code></pre></div>
<p>This returns a two-dimensional array: time x size, containing the cod
abundances. The time dimension depends on the value of the argument
<code>t_save</code> when <code><a href="../reference/project.html">project()</a></code> was run. You can see
that even though we specified <code>dt</code> to be 0.1 when we called
<code><a href="../reference/project.html">project()</a></code>, the <code>t_save = 1</code> argument has meant
that the output is only saved every year.</p>
<p>Often we are particularly interested in the results at the final
time-step. These we can access with</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/finalN.html">finalN</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span></span></code></pre></div>
<p>which is a two dimensional array (species x size).</p>
<p>The projected resource abundances can be accesses similarly with</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/N.html">NResource</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span></span></code></pre></div>
<p>This returns a two-dimensional array (time x size). And if we are
only interested in the final time step</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/finalN.html">finalNResource</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span></span></code></pre></div>
<p>returns a vector with one entry for each size class.</p>
</div>
<div class="section level2">
<h2 id="sec:summaries">Summary functions<a class="anchor" aria-label="anchor" href="#sec:summaries"></a>
</h2>
<p>As well as the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> methods that are available for
both <code>MizerParams</code> and <code>MizerSim</code> objects, there
are other useful summary functions to pull information out of a
<code>MizerSim</code> object. A description of the different summary
functions available is given in <a href="../reference/summary_functions.html">the summary functions help
page.</a></p>
<p>All of these functions have help files to explain how they are used.
(It is also possible to use most of these functions with a
<code>MizerParams</code> object if you also supply the population
abundance as an argument. This can be useful for exploring how changes
in parameter value or abundance can affect summary statistics and
indicators. We won’t explore this here but you can see their help files
for more details.)</p>
<p>The functions <code><a href="../reference/getBiomass.html">getBiomass()</a></code> and <code><a href="../reference/getN.html">getN()</a></code> have
additional arguments that allow the user to set the size range over
which to calculate the summary statistic. This is done by passing in a
combination of the arguments <code>min_l</code>, <code>min_w</code>,
<code>max_l</code> and <code>max_w</code> for the minimum and maximum
length or weight. If <code>min_l</code> is specified there is no need to
specify <code>min_w</code> and so on. However, if a length is specified
(minimum or maximum) then it is necessary for the species parameter
data.frame (see <a href="multispecies_model.html#sec:species_parameters_dataframe">the
species parameters section</a>) to include the parameters <code>a</code>
and <code>b</code> for length-weight conversion. It is possible to mix
length and weight constraints, e.g. by supplying a minimum weight and a
maximum length. The default values are the minimum and maximum weights
of the spectrum, i.e. the full range of the size spectrum is used.</p>
<div class="section level3">
<h3 id="sec:summaries_example">Examples of using the summary functions<a class="anchor" aria-label="anchor" href="#sec:summaries_example"></a>
</h3>
<p>Here we show a simple demonstration of using a summary function using
the <code>sim</code> object we created earlier. Here, we use
<code><a href="../reference/getSSB.html">getSSB()</a></code> to calculate the SSB of each species through time
(note the use of the <code><a href="https://rdrr.io/r/utils/head.html" class="external-link">head()</a></code> function to only display the
first few rows).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ssb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getSSB.html">getSSB</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">ssb</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 10 12</span></span></code></pre>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">ssb</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##     sp</span></span>
<span><span class="co">## time        Sprat      Sandeel       N.pout      Herring        Dab</span></span>
<span><span class="co">##    1 210810187886 5.378411e+12 183159668755 442644004208 6885675636</span></span>
<span><span class="co">##    2 157421300798 3.498137e+12 153386837865 499200353502 5278650740</span></span>
<span><span class="co">##    3 138701220818 2.510551e+12 135619248024 603931625682 5065030019</span></span>
<span><span class="co">##    4 118875574040 1.997337e+12 110306292341 569167018628 4877123531</span></span>
<span><span class="co">##    5 114060666493 1.790051e+12 112246876589 420615452917 5224602753</span></span>
<span><span class="co">##    6 125640651552 1.736155e+12 124869964868 351468531499 6147959412</span></span>
<span><span class="co">##     sp</span></span>
<span><span class="co">## time      Whiting        Sole    Gurnard       Plaice      Haddock          Cod</span></span>
<span><span class="co">##    1 113572753243 63630241776 9102232924 303365911438 151965178029 531536722956</span></span>
<span><span class="co">##    2  87964359889 46775076902 7385280731 232689238362 117830523964 345850203280</span></span>
<span><span class="co">##    3  91749455062 45443905458 7528148453 240988454909 135946957263 290183064993</span></span>
<span><span class="co">##    4  85038348880 49465062866 6855105119 264670808435 158905104522 308445205952</span></span>
<span><span class="co">##    5  77139941423 53555703121 5600934574 279557468426 145778058562 335438386336</span></span>
<span><span class="co">##    6  82462061701 56441766035 5398238488 278206590917 123593721267 351386199474</span></span>
<span><span class="co">##     sp</span></span>
<span><span class="co">## time       Saithe</span></span>
<span><span class="co">##    1 327578246185</span></span>
<span><span class="co">##    2 218500695506</span></span>
<span><span class="co">##    3 197610219846</span></span>
<span><span class="co">##    4 228220656964</span></span>
<span><span class="co">##    5 271860341040</span></span>
<span><span class="co">##    6 287805766571</span></span></code></pre>
<p>As mentioned above, we can specify the size range for the
<code>getsummaryBiomass()</code> and <code><a href="../reference/getN.html">getN()</a></code> functions. For
example, here we calculate the total biomass of each species but only
include individuals that are larger than 10 g and smaller than 1000
g.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">biomass</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getBiomass.html">getBiomass</a></span><span class="op">(</span><span class="va">sim</span>, min_w <span class="op">=</span> <span class="fl">10</span>, max_w <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">biomass</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##     sp</span></span>
<span><span class="co">## time        Sprat      Sandeel       N.pout      Herring        Dab</span></span>
<span><span class="co">##    1 244119195586 4.589606e+12 238847649463 1.273446e+12 8373096367</span></span>
<span><span class="co">##    2 189464604834 2.888858e+12 214678099536 1.413601e+12 6837801607</span></span>
<span><span class="co">##    3 169593586308 1.931520e+12 185655249238 1.536104e+12 6536986610</span></span>
<span><span class="co">##    4 146468867085 1.409300e+12 166879189209 1.360238e+12 6286073743</span></span>
<span><span class="co">##    5 144115814704 1.171670e+12 178630603519 1.175016e+12 6849215327</span></span>
<span><span class="co">##    6 159924185834 1.102235e+12 192414189537 1.177930e+12 7904848054</span></span>
<span><span class="co">##     sp</span></span>
<span><span class="co">## time      Whiting         Sole     Gurnard       Plaice      Haddock</span></span>
<span><span class="co">##    1 161515844306 127400523235 24759887586 766087469917 333172493301</span></span>
<span><span class="co">##    2 140923805330 112319321368 24087806247 722705573485 335440217763</span></span>
<span><span class="co">##    3 139784785126 114244854064 23828541236 743105121821 372682335506</span></span>
<span><span class="co">##    4 127051769924 115827036011 20324716177 711903001258 356182595515</span></span>
<span><span class="co">##    5 126548669345 116366841999 19072116393 661973266258 323469227911</span></span>
<span><span class="co">##    6 137220141191 121684387886 21334281004 668659838352 325245994096</span></span>
<span><span class="co">##     sp</span></span>
<span><span class="co">## time         Cod       Saithe</span></span>
<span><span class="co">##    1 45159646196 158969500338</span></span>
<span><span class="co">##    2 52110333051 183496280557</span></span>
<span><span class="co">##    3 62885974091 216448253249</span></span>
<span><span class="co">##    4 59073484678 214031942473</span></span>
<span><span class="co">##    5 51993520691 174593364166</span></span>
<span><span class="co">##    6 49544506290 138713867303</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="functions-for-calculating-indicators">Functions for calculating indicators<a class="anchor" aria-label="anchor" href="#functions-for-calculating-indicators"></a>
</h2>
<p>Functions are available to calculate a range of indicators from a
<code>MizerSim</code> object after a projection. A description of the
different indicator functions available is given in <a href="../reference/indicator_functions.html">the indicator functions
help page.</a>. You can read the help pages for each of the functions
for full instructions on how to use them, along with examples.</p>
<p>With all of the functions in the table it is possible to specify the
size range of the community to be used in the calculation (e.g. to
exclude very small or very large individuals) so that the calculated
metrics can be compared to empirical data. This is used in the same way
that we saw with the function <code><a href="../reference/getBiomass.html">getBiomass()</a></code> in <a href="exploring_the_simulation_results.html#sec:summaries">the section
on summary functions for MizerSim objects.</a>. It is also possible to
specify which species to include in the calculation. See the help files
for more details.</p>
<div class="section level3">
<h3 id="sec:indicators_example">Examples of calculating indicators<a class="anchor" aria-label="anchor" href="#sec:indicators_example"></a>
</h3>
<p>For these examples we use the <code>sim</code> object we created
earlier.</p>
<p>The slope of the community can be calculated using the
<code><a href="../reference/getCommunitySlope.html">getCommunitySlope()</a></code> function. Initially we include all
species and all sizes in the calculation (only the first five rows are
shown):</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">slope</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCommunitySlope.html">getCommunitySlope</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">slope</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##        slope intercept        r2</span></span>
<span><span class="co">## 1 -0.7822250  25.40779 0.8722251</span></span>
<span><span class="co">## 2 -0.7970084  25.24922 0.8666363</span></span>
<span><span class="co">## 3 -0.8066332  25.21573 0.8665750</span></span>
<span><span class="co">## 4 -0.8151679  25.23791 0.8678893</span></span>
<span><span class="co">## 5 -0.8229285  25.24489 0.8686275</span></span>
<span><span class="co">## 6 -0.8272602  25.23104 0.8673588</span></span></code></pre>
<p>This gives the slope, intercept and <span class="math inline">\(R^2\)</span> value through time (see the help file
for <code>getCommunitySlope</code> for more details).</p>
<p>We can include only the species we want with the <code>species</code>
argument. Below we only include demersal species. We also restrict the
size range of the community that is used in the calculation to between
10 g and 5 kg. The <code>species</code> argument is a character vector
of the names of the species that we want to include in the
calculation.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dem_species</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Dab"</span>, <span class="st">"Whiting"</span>, <span class="st">"Sole"</span>, <span class="st">"Gurnard"</span>, <span class="st">"Plaice"</span>, <span class="st">"Haddock"</span>,</span>
<span>    <span class="st">"Cod"</span>, <span class="st">"Saithe"</span><span class="op">)</span></span>
<span><span class="va">slope</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getCommunitySlope.html">getCommunitySlope</a></span><span class="op">(</span><span class="va">sim</span>, min_w <span class="op">=</span> <span class="fl">10</span>, max_w <span class="op">=</span> <span class="fl">5000</span>, </span>
<span>    species <span class="op">=</span> <span class="va">dem_species</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">slope</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##       slope intercept        r2</span></span>
<span><span class="co">## 1 -1.096584  26.88942 0.9749307</span></span>
<span><span class="co">## 2 -1.177678  27.21999 0.9796408</span></span>
<span><span class="co">## 3 -1.148456  27.13231 0.9754412</span></span>
<span><span class="co">## 4 -1.060903  26.70050 0.9748899</span></span>
<span><span class="co">## 5 -1.026889  26.50463 0.9820432</span></span>
<span><span class="co">## 6 -1.061542  26.68677 0.9807863</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="plotting-the-results">Plotting the results<a class="anchor" aria-label="anchor" href="#plotting-the-results"></a>
</h2>
<p>R is very powerful when it comes to exploring data through plots. Two
useful packages for plotting are <code>ggplot2</code> and
<code>plotly</code>. These use data.frames for input data whereas many
of the mizer functions return arrays or matrices. Fortunately it is
straightforward to turn arrays and matrices into data.frames using the
<code><a href="https://rdrr.io/pkg/reshape2/man/melt.html" class="external-link">melt()</a></code> function from the <code>reshape2</code> package that
mizer makes available to you. Although <code>mizer</code> does include
some dedicated plots, it is definitely worth your time getting to grips
with these other plotting packages. This will make it possible for you
to make your own plots. We provide some details in the section on <a href="plotting.html">using ggplot2 and plotly with mizer</a>.</p>
<p>Included in <code>mizer</code> are several dedicated plots that use
<code>MizerSim</code> objects as inputs (see <a href="../reference/plotting_functions.html">the plots help page.</a>).
As well as displaying the plots, these functions all return objects of
type <code>ggplot</code> from the <code>ggplot2</code> package, meaning
that they can be further modified by the user (e.g. by changing the
plotting theme). See the help page of the individual plot functions for
more details. The generic <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method has also been
overloaded for <code>MizerSim</code> objects. This produces several
plots in the same window to provide a snapshot of the results of the
simulation.</p>
<p>Some of the plots plot values by size (for example
<code><a href="../reference/plotFeedingLevel.html">plotFeedingLevel()</a></code> and <code><a href="../reference/plotSpectra.html">plotSpectra()</a></code>). For
these plots, the default is to use the data at the final time step of
the projection. With these plotting functions, it is also possible to
specify a different time, or a time range to average the values over
before plotting.</p>
<div class="section level3">
<h3 id="sec:plot_examples">Plotting examples<a class="anchor" aria-label="anchor" href="#sec:plot_examples"></a>
</h3>
<p>Using the plotting functions is straightforward. For example, to plot
the total biomass of each species against time you use the
<code><a href="../reference/plotBiomass.html">plotBiomass()</a></code> function:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotBiomass.html">plotBiomass</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span></span></code></pre></div>
<p><img src="exploring_the_simulation_results_files/figure-html/plotBiomass-1.png" width="700"></p>
<p>As mentioned above, some of the plot functions plot values against
size at a point in time (or averaged over a time period). For these
plots it is possible to specify the time step to plot, or the time
period to average the values over. The default is to use the final time
step. Here we plot the abundance spectra (biomass), averaged over time =
5 to 10:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotSpectra.html">plotSpectra</a></span><span class="op">(</span><span class="va">sim</span>, time_range <span class="op">=</span> <span class="fl">5</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p><img src="exploring_the_simulation_results_files/figure-html/plotSpectra_example-1.png" width="700"></p>
<p>As mentioned above, and as we have seen several times in this guide,
the generic <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> method has also been overloaded. This
produces 5 plots in the same window (<code><a href="../reference/plotFeedingLevel.html">plotFeedingLevel()</a></code>,
<code><a href="../reference/plotBiomass.html">plotBiomass()</a></code>, <code><a href="../reference/plotPredMort.html">plotPredMort()</a></code>,
<code><a href="../reference/plotFMort.html">plotFMort()</a></code> and <code><a href="../reference/plotSpectra.html">plotSpectra()</a></code>). It is possible
to pass in the same arguments that these individual plots use,
e.g. arguments to change the time period over which the data is
averaged.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span></span></code></pre></div>
<p><img src="exploring_the_simulation_results_files/figure-html/demo_summary_plot-1.png" width="700"></p>
<p>The next section describes how to use what we have learned to <a href="a_multispecies_model_of_the_north_sea.html">model the North
Sea.</a></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://www.york.ac.uk/maths/staff/gustav-delius/" class="external-link">Gustav Delius</a>, Finlay Scott, <a href="http://www.utas.edu.au/profiles/staff/imas/julia-blanchard" class="external-link">Julia Blanchard</a>, <a href="https://ken.haste.dk/" class="external-link">Ken Andersen</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
